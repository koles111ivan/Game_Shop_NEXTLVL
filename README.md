Онлайн-магазин NEXTLVL

Описание функционала приложения
1. Регистрация и авторизация пользователей
•	Регистрация:
Пользователь может создать аккаунт, указав имя, email и пароль. Пароль хешируется и сохраняется в базе данных.
•	Авторизация:
После входа пользователь получает JWT-токен, который хранится в localStorage. Этот токен используется для доступа к защищённым разделам сайта (например, оформление заказа, просмотр своих заказов).
2. Работа с товарами
•	Просмотр товаров:
Все пользователи могут просматривать список товаров, их описание, цену, наличие и изображения.
•	Добавление/редактирование/удаление товаров:
Администратор может добавлять новые товары, редактировать существующие и удалять их через API.

3. Корзина
•	Добавление в корзину:
Любой пользователь может добавить товар в корзину. Корзина хранится в localStorage, поэтому не теряется при перезагрузке страницы.
•	Изменение количества:
В корзине можно увеличивать или уменьшать количество каждого товара, либо удалять товар полностью.
•	Просмотр корзины:
На отдельной странице отображается содержимое корзины, итоговая сумма и кнопка для оформления заказа.

4. Оформление заказа
•	Проверка авторизации:
Оформить заказ может только авторизованный пользователь.
•	Отправка заказа:
При оформлении заказа данные корзины и пользователя отправляются на сервер. Сервер проверяет наличие товаров на складе, создает заказ и уменьшает остатки товаров.
•	Очищение корзины:
После успешного оформления заказа корзина очищается.

5. Работа с заказами
•	Просмотр своих заказов:
Пользователь может просматривать список своих заказов, видеть дату, состав заказа, количество и итоговую сумму.
•	Детализация заказа:
В каждом заказе отображаются все товары, их количество, цена и название.
•	Администрирование заказов:
Администратор может просматривать все заказы, менять их статус, удалять заказы.

6. Уведомления и обработка ошибок
•	Уведомления:
При успешных действиях (добавление в корзину, оформление заказа и т.д.) и ошибках (например, недостаточно товара на складе) пользователю показываются всплывающие уведомления.
•	Обработка ошибок:
Все ошибки (например, при работе с сервером или некорректных данных) корректно обрабатываются и отображаются пользователю.

7. Безопасность
•	Хеширование паролей:
Пароли пользователей хранятся в базе только в зашифрованном виде.
•	JWT:
Для аутентификации используется токен, который хранится только на клиенте.
•	Проверка ролей:
Некоторые действия доступны только администраторам.

8. Пример пользовательского сценария
1.	Пользователь регистрируется и входит в аккаунт.
2.	Просматривает товары, добавляет их в корзину.
3.	Переходит в корзину, меняет количество товаров.
4.	Оформляет заказ (если авторизован).
5.	Смотрит свои заказы в личном кабинете.
6.	Может выйти из аккаунта (logout).

Перечисление используемого стека технологий
Frontend (Клиентская часть):
•	HTML5
Структура страниц, разметка интерфейса.
•	CSS3
Стилизация элементов, оформление интерфейса.
•	JavaScript (Vanilla JS)
Вся логика работы с корзиной, заказами, авторизацией, динамическое обновление интерфейса.
•	localStorage
Хранение корзины и токена авторизации на стороне клиента.

Backend (Серверная часть):
•	Node.js
Среда выполнения JavaScript на сервере.
•	Express.js
Фреймворк для создания REST API, маршрутизация, обработка запросов.
•	MySQL
Реляционная база данных для хранения пользователей, товаров, заказов и т.д.
•	mysql2/promise
Библиотека для работы с MySQL из Node.js с поддержкой промисов.
•	bcrypt
Для хеширования паролей пользователей (безопасность).
•	jsonwebtoken (JWT)
Для создания и проверки токенов авторизации.
•	dotenv
Для работы с переменными окружения (например, настройки базы данных, секреты).
•	cors
Для разрешения кросс-доменных запросов между фронтендом и бэкендом.

Прочее:
•	REST API
Вся коммуникация между фронтендом и бэкендом построена на REST-принципах (GET, POST, PUT, DELETE).
•	SQL-скрипты
Для создания и обновления структуры базы данных (например, order_items.sql, update_products.sql).
•	JWT-токены
Для аутентификации и авторизации пользователей.

Инфраструктура и конфигурация:
•	.env файл
Для хранения конфиденциальных данных и настроек (DB_HOST, DB_USER, DB_PASSWORD, DB_NAME, JWT_SECRET и т.д.).
•	localStorage (браузер)
Для хранения состояния корзины и токена авторизации между сессиями.

Итого:
•	Frontend: HTML, CSS, JavaScript, localStorage
•	Backend: Node.js, Express.js, MySQL, mysql2, bcrypt, jsonwebtoken, dotenv, cors
•	API: REST
•	Безопасность: JWT, bcrypt
•	Инфраструктура: .env, SQL-скрипты


Перечисление страниц приложения с описанием и скриншотами
1. Главная страница (index.html)
•	Описание:
Это стартовая страница магазина.
•	Функционал:
•	Отображение списка товаров (каталог).
•	Краткая информация о каждом товаре: название, цена, изображение, кнопка «В корзину».
•	Навигация по сайту (переход к корзине, заказам, авторизации и т.д.).
 
 

2. Страница корзины (cart.html)
•	Описание:
Страница, где пользователь видит все добавленные в корзину товары.
•	Функционал:
•	Список товаров в корзине с изображением, названием, ценой, количеством.
•	Кнопки для увеличения/уменьшения количества, удаления товара.
•	Итоговая сумма заказа.
•	Кнопка «Оформить заказ».
•	Проверка авторизации перед оформлением заказа.
 

3. Страница заказов пользователя (orders.html)
•	Описание:
Личный кабинет пользователя, где отображаются все его заказы.
•	Функционал:
•	Список всех заказов пользователя.
•	Для каждого заказа: дата, состав заказа, количество, итоговая сумма.
•	Детализация товаров в каждом заказе.
 
4. Страница авторизации (login.html)
•	Описание:
Страница входа в аккаунт.
•	Функционал:
•	Форма для ввода email и пароля.
•	Кнопка «Войти».
•	Переход на страницу регистрации.
 
5. Страница регистрации (register.html)
•	Описание:
Страница создания нового аккаунта.
•	Функционал:
•	Форма для ввода имени, email, пароля.
•	Кнопка «Зарегистрироваться».
•	Переход на страницу входа.

 
6. Каталог (catalog.html или index.html)
•	Описание:
Основная страница с полным списком товаров магазина.
•	Функционал:
•	Отображение всех товаров
•	Поиск по товарам.
•	Краткая информация о каждом товаре: изображение, название, цена, кнопка «В корзину» и кнопка «Подробнее» (или клик по карточке).
 
 
7. О нас (about.html)
•	Описание:
Страница с информацией о магазине, его миссии, истории, преимуществах.
 
8. Контакты (contacts.html)
•	Описание:
Страница для связи с магазином.
 
9. Карточка товара (product.html)
•	Описание:
Страница, которая открывается при клике на товар в каталоге.
•	Функционал:
•	Подробная информация о товаре: изображение, полное описание, характеристики, цена.
•	Кнопка «Добавить в корзину».

 

Структура базы данных
В проекте используется реляционная база данных MySQL, которая состоит из четырех основных таблиц: users (пользователи), products (товары), orders (заказы) и order_items (товары в заказе). Ниже приведено описание каждой таблицы и их связей.
1. Таблица пользователей (users)
Таблица хранит информацию о зарегистрированных пользователях интернет-магазина. Для каждого пользователя сохраняется уникальный идентификатор, имя пользователя, email, хешированный пароль, дата регистрации и роль (например, обычный пользователь или администратор). Имя пользователя и email должны быть уникальными.
 
2. Таблица товаров (products)
В этой таблице содержится информация о всех товарах, представленных в магазине. Для каждого товара хранится уникальный идентификатор, название, подробное описание, цена, ссылка на изображение и количество товара на складе. Это позволяет отображать пользователям актуальную информацию о наличии и характеристиках товаров.
 
3. Таблица заказов (orders)
Таблица заказов фиксирует все покупки, совершённые пользователями. Каждый заказ связан с конкретным пользователем (через внешний ключ user_id), содержит общую сумму заказа, статус и дату создания заказа.
 
4. Таблица товаров в заказе (order_items)
Эта таблица предназначена для хранения состава каждого заказа. В ней для каждого заказа указывается, какие товары были куплены, в каком количестве и по какой цене на момент покупки. Каждая запись связана с конкретным заказом и конкретным товаром через внешние ключи.
 
Связи между таблицами
•	Один пользователь может иметь несколько заказов.
•	Один заказ может содержать несколько товаров.
•	Один товар может входить в состав разных заказов.

Данная структура базы данных позволяет:
•	Хранить и обрабатывать информацию о пользователях, товарах и заказах.
•	Гибко управлять ассортиментом и остатками товаров.
•	Вести историю покупок каждого пользователя.
•	Формировать подробные отчеты о заказах и их составе.


Описание используемых маршрутов API с указанием формата запросов и ответов

1. Пользователи (Users)
Регистрация пользователя
POST /api/users
Тело запроса (JSON):
{
  "username": "Ivan",
  "email": "ivan@example.com",
  "password": "password123",
  "role": "user"
}
Ответ:
{ "message": "User created successfully" }

Получить всех пользователей
GET /api/users
Ответ:
[
  {
    "id": 1,
    "username": "Ivan",
    "email": "ivan@example.com",
    "created_at": "2024-06-01T12:00:00.000Z",
    "role": "user"
  },
  ...
]
Получить пользователя по ID
GET /api/users/:id
Ответ:
{
  "id": 1,
  "username": "Ivan",
  "email": "ivan@example.com",
  "created_at": "2024-06-01T12:00:00.000Z",
  "role": "user"
}
Обновить пользователя
PUT /api/users/:id
Тело запроса (JSON):
{
  "username": "IvanNew",
  "email": "ivannew@example.com",
  "role": "admin"
}
Ответ:
{ "message": "User updated successfully" }
Удалить пользователя
DELETE /api/users/:id
Ответ:
{ "message": "User deleted successfully" }
Вход (логин)
POST /api/login
Тело запроса (JSON):
{
  "email": "ivan@example.com",
  "password": "password123"
}
Ответ:
{ "token": "JWT_TOKEN_STRING" }

2. Товары (Products)
Добавить товар
POST /api/products
Тело запроса (JSON):
{
  "name": "Logitech G502 X",
  "description": "Игровая мышь",
  "price": 5990.00,
  "image_url": "https://example.com/image.jpg",
  "stock_quantity": 10
}
Ответ:
{ "message": "Product created successfully" }
Получить все товары
GET /api/products
Ответ:
[
  {
    "id": 1,
    "name": "Logitech G502 X",
    "description": "Игровая мышь",
    "price": 5990.00,
    "image_url": "https://example.com/image.jpg",
    "stock_quantity": 10
  },
  ...
]
Получить товар по ID
GET /api/products/:id
Ответ:
{
  "id": 1,
  "name": "Logitech G502 X",
  "description": "Игровая мышь",
  "price": 5990.00,
  "image_url": "https://example.com/image.jpg",
  "stock_quantity": 10
}
Обновить товар
PUT /api/products/:id
Тело запроса (JSON):
{
  "name": "Logitech G502 X Updated",
  "description": "Обновленное описание",
  "price": 6490.00,
  "image_url": "https://example.com/image2.jpg",
  "stock_quantity": 8
}
Ответ:
{ "message": "Product updated successfully" }
Удалить товар
DELETE /api/products/:id
Ответ:
{ "message": "Product deleted successfully" }

3. Заказы (Orders)
Создать заказ
POST /api/orders
Тело запроса (JSON):
{
  "user_id": 1,
  "items": [
    { "product_id": 1, "quantity": 2, "price": 5990.00 },
    { "product_id": 2, "quantity": 1, "price": 12990.00 }
  ],
  "status": "pending"
}
Ответ:
{ "message": "Order created successfully", "order_id": 5 }
Получить все заказы
GET /api/orders
Ответ:
[
  {
    "id": 5,
    "user_id": 1,
    "total_amount": 24970.00,
    "status": "pending",
    "created_at": "2024-06-01T12:30:00.000Z",
    "username": "Ivan",
    "email": "ivan@example.com",
    "items": "[{\"product_id\":1,\"quantity\":2,\"price\":5990.00,\"product_name\":\"Logitech G502 X\"},{\"product_id\":2,\"quantity\":1,\"price\":12990.00,\"product_name\":\"Xbox Elite Controller\"}]"
  },
  ...
]
Получить заказ по ID
GET /api/orders/:id
Ответ:
{
  "id": 5,
  "user_id": 1,
  "total_amount": 24970.00,
  "status": "pending",
  "created_at": "2024-06-01T12:30:00.000Z",
  "username": "Ivan",
  "email": "ivan@example.com",
  "items": "[{\"product_id\":1,\"quantity\":2,\"price\":5990.00,\"product_name\":\"Logitech G502 X\"},{\"product_id\":2,\"quantity\":1,\"price\":12990.00,\"product_name\":\"Xbox Elite Controller\"}]"
}
Обновить заказ (например, статус)
PUT /api/orders/:id
Тело запроса (JSON):
{
  "status": "completed"
}
Ответ:
{ "message": "Order updated successfully" }
Удалить заказ
DELETE /api/orders/:id
Ответ:
{ "message": "Order deleted successfully" }
Ошибки
Если что-то пошло не так, сервер возвращает ошибку:
{ "error": "Описание ошибки" }


